<template>
    <div id="notes-list">

    <div class="search-bar">
        <input class="search" type="search" placeholder="Search Notes" v-model="search">
    </div>

    <div id="list-header">

        <div class="btn-group btn-main-group" role="group">
            <!-- All Notes button -->
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-1"
                    @click="show = 'all'"
                    :class="{activeBtn: show === 'all'}">
                    All Notes
                </button>
            </div>
            <!-- Favourite Button -->
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-2"
                    @click="show = 'favourites'"
                    :class="{activeBtn: show === 'favourites'}">
                    Favourite
                </button>
            </div>
        </div>
        <!-- render notes in a list -->
        <div class="container">

            <div class="notes-list-canvas">

            <div class="list-group">
                <a v-for="note in filteredNotes"
                    class="list-group-item" href="#"
                    :class="{active: activeNote === note}"
                    @click="updateActiveNote(note)">
                    <h4 class="list-group-item-heading">
                        {{ note.text.trim().substring(0, 30) }}
                    </h4>
                </a>
            </div>

            </div>

        </div>
    </div>

    <div class="bottom-btns btn-group" role="group">
        <div class="btn-group add" role="group">
            <button @click="addNote" class="icon-btns btn-first">
                <svg class="heart" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation:isolate" viewBox="740.311 320.985 37.824 37.824" width="22" height="22"><path d=" M 760.723 341.397 Q 776.636 341.397 776.636 341.397 C 777.464 341.397 778.136 340.725 778.135 339.897 C 778.134 339.069 777.464 338.397 776.636 338.397 Q 776.636 338.397 760.723 338.397 Q 760.723 322.484 760.723 322.484 C 760.723 321.656 760.052 320.985 759.223 320.985 C 758.394 320.985 757.723 321.656 757.723 322.484 Q 757.723 322.484 757.723 338.397 Q 741.811 338.397 741.811 338.397 C 740.982 338.397 740.311 339.069 740.311 339.897 C 740.311 340.312 740.479 340.686 740.75 340.958 C 741.021 341.23 741.396 341.397 741.811 341.397 Q 741.811 341.397 757.723 341.397 Q 757.723 357.31 757.723 357.31 C 757.723 357.724 757.891 358.099 758.163 358.37 C 758.435 358.641 758.809 358.809 759.223 358.809 C 760.051 358.81 760.723 358.138 760.723 357.31 Q 760.723 357.31 760.723 341.397 Z " fill-rule="evenodd" fill="grey"/></svg>
            </button>
        </div>
        <div class="btn-group heart" :class="{starred: activeNote.favourite}" role="group">
            <button @click="toggleFavourite" class="icon-btns icon-after-1">
                <svg :class="{starred: activeNote.favourite}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation:isolate" viewBox="3479.05 508 41.939 34.081" width="24" height="24"><path d=" M 3514.803 508.999 C 3509.737 506.684 3503.751 508.531 3500.948 513.104 C 3500.947 513.105 3500.947 513.105 3500.944 513.107 C 3500.938 513.122 3500.93 513.138 3500.918 513.149 C 3500.917 513.155 3500.913 513.16 3500.912 513.164 C 3500.72 513.459 3500.38 513.656 3499.994 513.656 C 3499.608 513.656 3499.268 513.461 3499.077 513.164 C 3499.073 513.16 3499.071 513.155 3499.068 513.149 C 3499.058 513.138 3499.049 513.122 3499.043 513.107 C 3499.043 513.106 3499.043 513.106 3499.04 513.104 C 3496.239 508.531 3490.253 506.684 3485.185 508.999 C 3480.118 511.315 3477.494 517.682 3480.03 522.901 C 3482.031 527.02 3493.299 537.204 3497.966 541.32 C 3497.966 541.32 3497.97 541.32 3497.97 541.32 C 3498.503 541.791 3499.213 542.081 3499.994 542.081 C 3500.775 542.081 3501.477 541.793 3502.013 541.326 C 3502.013 541.326 3502.013 541.326 3502.013 541.326 C 3506.673 537.218 3517.954 527.024 3519.959 522.901 C 3522.496 517.682 3520.188 511.458 3514.803 508.999 C 3514.803 508.999 3514.803 508.999 3514.803 508.999 Z " fill-rule="evenodd" fill="grey"/></svg>
            </button>
        </div>
        <div class="btn-group delete" role="group">
            <button @click="deleteNote" class="icon-btns icon-after-1">
                 <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation:isolate" viewBox="1463.35 1327.38 33.88 38.88" width="20" height="22"><path d="M 1495.73 1332.88 L 1487.6 1332.88 Q 1487.6 1330.88 1487.6 1330.88 C 1487.6 1328.95 1486.03 1327.38 1484.1 1327.38 C 1484.1 1327.38 1476.23 1327.38 1476.23 1327.38 C 1474.3 1327.38 1472.73 1328.95 1472.73 1330.88 Q 1472.73 1330.88 1472.73 1332.88 Q 1464.85 1332.88 1464.85 1332.88 C 1464.03 1332.88 1463.35 1333.55 1463.35 1334.38 C 1463.35 1335.21 1464.03 1335.88 1464.85 1335.88 Q 1464.85 1335.88 1466.6 1335.88 Q 1466.6 1362.76 1466.6 1362.76 C 1466.6 1364.69 1468.17 1366.26 1470.1 1366.26 C 1470.1 1366.26 1490.35 1366.26 1490.35 1366.26 C 1492.28 1366.26 1493.85 1364.69 1493.85 1362.76 Q 1493.85 1362.76 1493.85 1335.88 Q 1495.73 1335.88 1495.73 1335.88 C 1496.56 1335.88 1497.23 1335.21 1497.23 1334.38 C 1497.23 1333.55 1496.56 1332.88 1495.73 1332.88 Q 1495.73 1332.88 1495.73 1332.88 Z" style="stroke:none;fill:grey;stroke-miterlimit:10;fill-rule:evenodd;"/></svg>
            </button>
        </div>
        <div class="btn-group settings" role="group">
            <button class="icon-btns icon-after-1">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation:isolate" viewBox="1814.354 889.601 44 44" width="25" height="25"><path d="M 1858.256 909.569 Q 1858.231 909.572 1858.231 909.572 C 1858.143 908.709 1857.459 908.023 1856.597 907.938 Q 1856.597 907.938 1856.222 907.938 L 1855.591 907.938 Q 1855.591 907.926 1855.591 907.926 C 1854.514 907.926 1853.577 907.305 1853.129 906.398 C 1853.02 906.178 1852.938 905.938 1852.895 905.686 C 1852.691 905.121 1852.462 904.573 1852.206 904.036 C 1852.206 904.034 1852.206 904.034 1852.204 904.033 C 1852.075 903.842 1851.971 903.635 1851.892 903.415 C 1851.892 903.414 1851.892 903.413 1851.892 903.413 C 1851.791 903.125 1851.735 902.817 1851.735 902.496 C 1851.735 902.174 1852.042 901.051 1852.54 900.555 Q 1852.54 900.555 1852.537 900.555 Q 1853.095 899.996 1853.095 899.996 C 1853.103 899.992 1853.11 899.986 1853.117 899.979 C 1853.123 899.971 1853.13 899.964 1853.136 899.957 C 1853.788 899.285 1853.822 898.239 1853.24 897.528 C 1853.24 897.528 1853.252 897.522 1853.252 897.522 C 1852.824 897.007 1852.374 896.516 1851.904 896.046 C 1851.434 895.577 1850.918 895.105 1850.393 894.667 C 1850.393 894.667 1850.387 894.673 1850.387 894.673 C 1849.743 894.147 1848.821 894.128 1848.154 894.615 Q 1848.154 894.615 1847.753 895.017 L 1847.376 895.391 Q 1847.36 895.374 1847.36 895.374 C 1846.559 896.177 1845.385 896.379 1844.396 895.982 C 1844.262 895.928 1844.131 895.863 1844.006 895.787 C 1843.375 895.481 1842.723 895.21 1842.052 894.983 C 1841.933 894.953 1841.817 894.914 1841.701 894.867 C 1841.701 894.867 1841.701 894.867 1841.698 894.864 C 1841.37 894.733 1841.061 894.529 1840.793 894.264 C 1840.525 893.998 1840.087 893.252 1840.012 892.667 C 1839.937 892.081 1839.981 892.209 1840.012 891.98 C 1840.012 891.98 1840.012 891.508 1840.012 891.508 C 1840.012 890.607 1839.36 889.858 1838.503 889.705 C 1838.396 889.695 1838.29 889.688 1838.183 889.677 C 1838.183 889.677 1838.182 889.677 1838.182 889.677 C 1837.575 889.627 1836.967 889.601 1836.35 889.601 C 1835.733 889.601 1835.125 889.627 1834.519 889.677 C 1834.519 889.677 1834.517 889.677 1834.517 889.677 C 1834.409 889.688 1834.303 889.695 1834.195 889.705 C 1833.338 889.858 1832.689 890.607 1832.689 891.508 C 1832.689 891.508 1832.689 892.325 1832.689 892.325 C 1832.689 893.506 1831.947 894.512 1830.903 894.899 C 1830.838 894.926 1830.768 894.948 1830.699 894.965 C 1829.965 895.216 1829.256 895.511 1828.573 895.85 C 1828.568 895.851 1828.568 895.853 1828.565 895.853 C 1828.511 895.883 1828.457 895.91 1828.4 895.936 C 1828.343 895.963 1827.667 896.184 1827.259 896.184 C 1826.85 896.184 1825.812 895.876 1825.318 895.38 Q 1825.318 895.38 1825.312 895.385 Q 1824.734 894.807 1824.734 894.807 C 1824.096 894.169 1823.112 894.1 1822.398 894.594 C 1822.316 894.66 1822.234 894.727 1822.155 894.795 C 1822.152 894.799 1822.148 894.802 1822.145 894.807 C 1821.677 895.201 1821.228 895.615 1820.797 896.046 C 1820.366 896.477 1819.95 896.926 1819.559 897.391 C 1819.559 897.391 1819.557 897.391 1819.557 897.396 C 1819.487 897.478 1819.415 897.561 1819.349 897.645 C 1818.849 898.361 1818.921 899.348 1819.557 899.983 C 1819.557 899.983 1820.135 900.561 1820.135 900.561 C 1820.965 901.394 1821.151 902.628 1820.693 903.638 C 1820.664 903.702 1820.633 903.765 1820.599 903.825 C 1820.262 904.507 1819.967 905.217 1819.721 905.944 C 1819.699 906.023 1819.673 906.097 1819.644 906.172 C 1819.644 906.172 1819.644 906.172 1819.644 906.174 C 1819.51 906.521 1819.302 906.848 1819.021 907.128 C 1818.739 907.408 1817.784 907.933 1817.081 907.933 Q 1817.081 907.933 1817.081 907.941 Q 1816.262 907.941 1816.262 907.941 C 1815.361 907.941 1814.612 908.59 1814.459 909.447 C 1814.448 909.553 1814.439 909.661 1814.429 909.77 C 1814.429 909.77 1814.429 909.77 1814.429 909.77 C 1814.38 910.361 1814.354 910.999 1814.354 911.603 C 1814.354 911.603 1814.354 911.603 1814.354 911.603 C 1814.354 911.608 1814.354 911.613 1814.354 911.618 C 1814.354 911.622 1814.354 911.63 1814.354 911.632 C 1814.354 911.632 1814.354 911.632 1814.354 911.632 C 1814.354 912.24 1814.38 912.84 1814.429 913.434 C 1814.429 913.434 1814.429 913.437 1814.429 913.437 C 1814.437 913.542 1814.448 913.649 1814.459 913.757 C 1814.612 914.613 1815.359 915.266 1816.259 915.266 C 1816.259 915.266 1816.259 915.266 1816.263 915.266 C 1816.263 915.266 1817.082 915.266 1817.082 915.266 C 1818.251 915.266 1819.248 915.998 1819.645 917.028 C 1819.645 917.029 1819.645 917.032 1819.645 917.032 C 1819.671 917.101 1819.695 917.17 1819.711 917.237 C 1819.715 917.24 1819.715 917.245 1819.718 917.25 C 1819.964 917.981 1820.26 918.692 1820.597 919.377 C 1820.602 919.38 1820.603 919.385 1820.605 919.388 C 1820.634 919.44 1820.66 919.496 1820.687 919.552 C 1820.846 919.899 1820.936 920.29 1820.936 920.696 C 1820.936 921.102 1820.63 922.141 1820.132 922.638 Q 1820.132 922.638 1820.135 922.641 Q 1819.575 923.2 1819.575 923.2 C 1819.569 923.206 1819.56 923.213 1819.553 923.22 C 1819.545 923.228 1819.537 923.235 1819.532 923.242 C 1818.923 923.872 1818.852 924.834 1819.327 925.536 C 1819.408 925.633 1819.487 925.73 1819.569 925.822 C 1819.96 926.285 1820.369 926.727 1820.798 927.156 C 1820.798 927.156 1820.798 927.156 1820.798 927.156 C 1821.226 927.584 1821.673 927.998 1822.136 928.389 C 1822.229 928.468 1822.322 928.545 1822.414 928.624 C 1823.05 929.052 1823.893 929.036 1824.516 928.583 Q 1824.516 928.583 1824.917 928.181 L 1825.293 927.806 Q 1825.31 927.82 1825.31 927.82 C 1826.142 926.99 1827.379 926.804 1828.393 927.266 C 1828.445 927.288 1828.497 927.314 1828.545 927.341 C 1828.548 927.344 1828.554 927.344 1828.558 927.348 C 1829.248 927.69 1829.965 927.989 1830.702 928.238 C 1830.765 928.257 1830.828 928.279 1830.891 928.301 C 1831.25 928.436 1831.588 928.645 1831.878 928.935 C 1832.168 929.226 1832.683 930.172 1832.683 930.876 Q 1832.683 930.876 1832.69 930.876 Q 1832.69 931.677 1832.69 931.677 C 1832.69 932.623 1833.41 933.404 1834.333 933.498 C 1834.333 933.498 1834.333 933.509 1834.333 933.509 C 1834.998 933.572 1835.67 933.601 1836.352 933.601 C 1837.033 933.601 1837.704 933.57 1838.371 933.509 C 1838.371 933.509 1838.369 933.498 1838.369 933.498 C 1839.291 933.404 1840.015 932.623 1840.015 931.677 C 1840.015 931.677 1840.015 930.86 1840.015 930.86 C 1840.015 929.757 1840.663 928.807 1841.597 928.372 C 1841.788 928.283 1841.989 928.216 1842.198 928.169 C 1842.802 927.958 1843.386 927.715 1843.957 927.44 C 1844.121 927.332 1844.298 927.242 1844.485 927.176 C 1844.783 927.063 1845.107 927 1845.447 927 C 1845.787 927 1846.78 927.261 1847.266 927.693 C 1847.35 927.763 1847.428 927.842 1847.502 927.927 Q 1847.502 927.927 1847.97 928.397 Q 1847.971 928.394 1847.971 928.394 C 1848.614 929.036 1849.625 929.101 1850.341 928.583 C 1850.344 928.583 1850.346 928.58 1850.348 928.576 C 1850.408 928.527 1850.465 928.479 1850.522 928.43 C 1851.002 928.024 1851.466 927.6 1851.908 927.156 C 1852.351 926.711 1852.776 926.251 1853.182 925.77 C 1853.233 925.708 1853.286 925.645 1853.338 925.58 C 1853.841 924.891 1853.796 923.93 1853.214 923.285 Q 1853.214 923.285 1853.212 923.283 L 1853.082 923.154 L 1852.571 922.641 Q 1852.571 922.639 1852.571 922.639 C 1851.75 921.82 1851.558 920.614 1851.99 919.611 C 1852.03 919.518 1852.077 919.426 1852.128 919.335 C 1852.453 918.675 1852.738 917.99 1852.978 917.287 C 1853.004 917.195 1853.035 917.101 1853.072 917.011 C 1853.204 916.668 1853.41 916.347 1853.686 916.07 C 1853.961 915.792 1854.922 915.267 1855.627 915.267 Q 1855.627 915.267 1855.627 915.264 L 1856.417 915.264 Q 1856.417 915.253 1856.417 915.253 C 1857.394 915.253 1858.196 914.484 1858.244 913.517 C 1858.244 913.517 1858.272 913.52 1858.272 913.52 C 1858.326 912.887 1858.354 912.246 1858.354 911.602 C 1858.354 910.958 1858.317 910.238 1858.256 909.569 Q 1858.256 909.569 1858.256 909.569 Z M 1847.596 911.6 Q 1847.596 911.6 1847.596 911.6 C 1847.596 912.882 1847.382 914.114 1846.988 915.261 C 1846.838 915.698 1846.663 916.124 1846.463 916.535 C 1845.917 917.662 1845.181 918.681 1844.311 919.559 C 1843.441 920.438 1842.418 921.17 1841.296 921.724 C 1840.879 921.93 1840.452 922.109 1840.012 922.26 C 1838.864 922.654 1837.631 922.874 1836.35 922.879 C 1836.339 922.879 1836.327 922.879 1836.317 922.879 C 1835.048 922.879 1833.83 922.67 1832.689 922.283 C 1832.232 922.128 1831.788 921.944 1831.361 921.734 C 1830.242 921.184 1829.228 920.46 1828.357 919.591 C 1827.487 918.723 1826.744 917.701 1826.192 916.577 C 1825.983 916.152 1825.798 915.713 1825.645 915.261 C 1825.26 914.119 1825.04 912.9 1825.037 911.625 C 1825.034 910.351 1825.252 909.077 1825.645 907.936 C 1825.801 907.484 1825.984 907.044 1826.192 906.62 C 1826.743 905.497 1827.477 904.48 1828.357 903.606 C 1829.238 902.732 1830.256 901.998 1831.38 901.451 C 1831.802 901.246 1832.237 901.069 1832.689 900.914 C 1833.828 900.526 1835.046 900.319 1836.317 900.319 C 1836.328 900.319 1836.34 900.319 1836.35 900.319 C 1837.631 900.323 1838.865 900.54 1840.012 900.938 C 1840.452 901.09 1840.879 901.269 1841.293 901.475 C 1842.415 902.033 1843.435 902.764 1844.308 903.638 C 1845.181 904.513 1845.905 905.528 1846.453 906.642 C 1846.658 907.059 1846.837 907.492 1846.989 907.936 C 1847.382 909.08 1847.598 910.308 1847.598 911.587 Q 1847.598 911.587 1847.598 911.6 L 1847.596 911.6 Z" style="stroke:none;fill:grey;stroke-miterlimit:10;fill-rule:evenodd;"/></svg>
            </button>
        </div>
    </div>
    </div>

    </div>
</template>

<script>
import { updateActiveNote } from "./../../server/vuex/actions"

export default {
    data () {
        return {
            show: "all",
            search: ""
        }
    },
    methods: {
        addNote () {
            this.$store.dispatch("addNote")
        },
        updateActiveNote (note) {
            this.$store.dispatch("updateActiveNote", note)
        },
        toggleFavourite () {
            this.$store.dispatch("toggleFavourite")
        },
        deleteNote () {
            this.$store.dispatch("deleteNote")
        }
    },
    computed: {
        notes () {
            return this.$store.state.notes
        },
        filteredNotes () {

            if (this.show === "all") {

                var notes = this.notes;
                var search = this.search.toLowerCase();

                if (!search) {
                    return notes;
                }

                else {

                    return notes.filter(function(item) {
                        return item.text.toLowerCase().indexOf(search) !== -1
                    });

                }
                }

            else if (this.show === "favourites") {

                var notes = this.notes.filter(note => note.favourite);
                var search = this.search.toLowerCase();

                if (!search) {
                    return notes;
                }

                else {

                    return notes.filter(function(item) {
                        return item.text.toLowerCase().indexOf(search) !== -1
                    });

                }
            }
        },
        activeNote () {
            return this.$store.getters.activeNote
        }
    }
}
</script>
